<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic To-Do List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 40px;
        }
        input, button, select {
            padding: 6px;
            margin: 5px;
        }
        ul {
            list-style-type: none;
            padding: 0;
            width: 40%;
            margin: auto;
        }
        li {
            padding: 8px;
            margin: 5px 0;
            background: #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .completed {
            text-decoration: line-through;
            background-color: #c8f7c5;
        }
    </style>
</head>
<body>

<h2>Dynamic To-Do List</h2>

<input type="text" id="taskinput" placeholder="Enter a task">
<button onclick="addTask()">Add</button>

<select id="filter" onchange="displayTasks()">
    <option value="all">All</option>
    <option value="completed">Completed</option>
    <option value="pending">Pending</option>
</select>

<h4>Completed Tasks: <span id="count">0</span></h4>

<ul id="tasklist"></ul>

<script>
let tasks = [];

function addTask() {
    let text = document.getElementById("taskinput").value;

    if (text === "") {
        alert("Task cannot be empty");
        return;
    }

    tasks.push({ text: text, completed: false });
    document.getElementById("taskinput").value = "";
    displayTasks();
}

function displayTasks() {
    let list = document.getElementById("tasklist");
    let filter = document.getElementById("filter").value;
    list.innerHTML = "";

    let completedCount = 0;

    tasks.forEach((task, index) => {
        if (
            filter === "all" ||
            (filter === "completed" && task.completed) ||
            (filter === "pending" && !task.completed)
        ) {
            let li = document.createElement("li");
            li.className = task.completed ? "completed" : "";

            let checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.checked = task.completed;
            checkbox.onchange = function () {
                tasks[index].completed = this.checked;
                displayTasks();
            };

            let span = document.createElement("span");
            span.innerText = task.text;

            let delBtn = document.createElement("button");
            delBtn.innerText = "Delete";
            delBtn.onclick = function () {
                tasks.splice(index, 1);
                displayTasks();
            };

            li.appendChild(checkbox);
            li.appendChild(span);
            li.appendChild(delBtn);
            list.appendChild(li);
        }

        if (task.completed) completedCount++;
    });

    document.getElementById("count").innerText = completedCount;
}
</script>

</body>
</html>
